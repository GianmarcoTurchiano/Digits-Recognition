stages:
  download:
    cmd: python digits_recognition/stages/dataset/download.py -o ./data/raw/archive.zip
    deps:
    - digits_recognition/stages/dataset/download.py
    outs:
    - ./data/raw/archive.zip
  extract:
    cmd: python digits_recognition/stages/dataset/extract.py -d ./data/raw/archive.zip
      -o ./data/interim
    deps:
    - digits_recognition/stages/dataset/extract.py
    - ./data/raw/archive.zip
    outs:
    - ./data/interim
  split:
    cmd: python digits_recognition/stages/dataset/split.py -d ./data/interim -o ./data/processed/dataset.pkl
      --split_seed 42 --validation_ratio 0.15
    deps:
    - digits_recognition/stages/dataset/split.py
    - ./data/interim
    outs:
    - ./data/processed/dataset.pkl
  train:
    cmd: python digits_recognition/modeling/train.py -d ./data/processed/dataset.pkl -m ./models/digit_classifier.pth 
      --patience 10 --epochs 100 --learning_rate 0.001 --weight_decay 1e-2 --random_seed 42 --batch_size 64
    deps:
    - digits_recognition/modeling/train.py
    - ./data/processed/dataset.pkl
    outs:
    - ./models/digit_classifier.pth